# `top` 命令

查看CPU、内存使用情况，类似Windows的任务管理器。

默认每5秒刷新一次，语法：

```bash
top
```

按 q 或 ctrl+c 退出。

### 各列指标解释：

_ PID ：进程ID。

_ USER ：进程所属用户。

_ PR ：进程优先级，越小越高。

_ NI ：负值表示高优先级，正值表示低优先级。

- VIRT ：进程使用的虚拟内存，单位KB。

- RES ：进程使用的物理内存，单位KB。

- SHR ：进程使用的共享内存，单位KB。

- S ：进程状态(S休眠，R运行，Z僵死状态，N负数优先级，I空闲状态)。

- %CPU ：进程的CPU占用率。

- %MEM ：进程的内存占用率。

- TIME+ ：进程使用的CPU时间总计，单位10毫秒。

- COMMAND ：进程的命令或名称或程序文件路径。

### `top` 命令支持的选项

`[-p]` ：显示某个进程的信息。

`[-d]` ：设置刷新时间，默认5秒。

`[-c]` ：显示产生进程的完整命令，默认是进程名。

`[-n]` ：指定刷新次数，比如 `top -n 3` ，刷新3次后退出。

`[-b]` ：以非交互非全屏模式运行，以批次的方式执行 `top` 一般配合 `-n` 指定输出几次统计信息，将输出重定向到文件，比如 `top -b -n 3 > /tmp/top.tmp` 。

`[-i]` ：不显示任何闲置(idle)或僵尸(zombie)进程。

`[-u]` ：查找特定用户启动的进程。

例如：

```bash
top -p 1 # 显示PID为1的进程

top -d 3 # 设置三秒刷新一次

top -c # 显示产生进程的完整命令

top -n 3 # 刷新3次后自动退出

top -u username # 显示指定用户的进程

```

### `top` 交互式运行

| 按键 |              作用               |
| :----: | :-----------------------------: |
|   h    |   显示帮助画面    |
|   c    | 显示进程的完整命令，即 `-c` 再次按下又恢复默认  |
|   f    |   选择需要展示的项目    |
|   M    |   根据驻留内存大小(RES)排序    |
|   P    |  根据CPU占用率排序   |
|   T    |  根据时间/累计时间排序   |
|   E    |   切换顶部内存显示单位    |
|   e    | 切换进程内存显示单位  |
|   l    |   移动光标到当前行的开头    |
|   i    |   移动光标到当前行的结尾    |
|   t    |  向上翻页   |
|   m    |  向下翻页   |


